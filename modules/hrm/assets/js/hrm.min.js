!function($){"use strict";var e={initialize:function(){$(".erp-hr-depts").on("click","a#erp-new-dept",this.department.create),$(".erp-hr-depts").on("click","a.submitdelete",this.department.remove),$(".erp-hr-depts").on("click","span.edit a",this.department.edit),$(".erp-hr-designation").on("click","a#erp-new-designation",this.designation.create),$(".erp-hr-designation").on("click","a.submitdelete",this.designation.remove),$(".erp-hr-designation").on("click","span.edit a",this.designation.edit),$(".erp-hr-employees").on("click","a#erp-employee-new",this.employee.create),$(".erp-hr-employees").on("click","span.edit a",this.employee.create)},department:{create:function(e){e.preventDefault(),$.erpPopup({title:wpErpHr.popup.dept_title,button:wpErpHr.popup.dept_submit,content:wp.template("erp-new-dept")(),extraClass:"smaller",onSubmit:function(e){wp.ajax.send({data:this.serialize(),success:function(t){var a=wp.template("erp-dept-row"),p=$("table.department-list-table");if(p){var r="even"===$("tr:last",p).attr("class")?"alternate":"even";t.cls=r,p.append(a(t)),e.closeModal()}},error:function(e){alert(e)}})}})},edit:function(e){e.preventDefault();var t=$(this);$.erpPopup({title:wpErpHr.popup.dept_update,button:wpErpHr.popup.dept_update,content:wp.template("erp-new-dept")(),extraClass:"smaller",onReady:function(){var e=this;$("header",e).after($('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-get-dept",{data:{id:t.data("id"),_wpnonce:wpErpHr.nonce},success:function(a){$(".loader",e).remove(),$("#dept-title",e).val(a.name),$("#dept-desc",e).val(a.data.description),$("#dept-parent",e).val(a.data.parent),$("#dept-id",e).val(a.id),$("#dept-action",e).val("erp-hr-update-dept"),$('#dept-parent option[value="'+t.data("id")+'"]',e).attr("disabled","disabled")}})},onSubmit:function(e){wp.ajax.send({data:this.serialize(),success:function(a){var p=wp.template("erp-dept-row");a.cls=t.closest("tr").attr("class"),t.closest("tr").replaceWith(p(a)),e.closeModal()},error:function(e){alert(e)}})}})},remove:function(e){e.preventDefault();var t=$(this);confirm(wpErpHr.delConfirmDept)&&wp.ajax.send("erp-hr-del-dept",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id")},success:function(){t.closest("tr").fadeOut("fast",function(){$(this).remove()})},error:function(e){alert(e)}})}},designation:{create:function(e){e.preventDefault(),$.erpPopup({title:wpErpHr.popup.desig_title,button:wpErpHr.popup.desig_submit,content:wp.template("erp-new-desig")(),extraClass:"smaller",onSubmit:function(e){wp.ajax.send({data:this.serialize(),success:function(t){var a=wp.template("erp-desig-row"),p=$("table.designation-list-table");if(p){var r="even"===$("tr:last",p).attr("class")?"alternate":"even";t.cls=r,p.append(a(t)),e.closeModal()}},error:function(e){alert(e)}})}})},edit:function(e){e.preventDefault();var t=$(this);$.erpPopup({title:wpErpHr.popup.desig_update,button:wpErpHr.popup.desig_update,content:wp.template("erp-new-desig")(),extraClass:"smaller",onReady:function(){var e=this;$("header",e).after($('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-get-desig",{data:{id:t.data("id"),_wpnonce:wpErpHr.nonce},success:function(t){$(".loader",e).remove(),$("#desig-title",e).val(t.name),$("#desig-desc",e).val(t.data.description),$("#desig-id",e).val(t.id),$("#desig-action",e).val("erp-hr-update-desig")}})},onSubmit:function(e){wp.ajax.send({data:this.serialize(),success:function(a){var p=wp.template("erp-desig-row");a.cls=t.closest("tr").attr("class"),t.closest("tr").replaceWith(p(a)),e.closeModal()},error:function(e){alert(e)}})}})},remove:function(e){e.preventDefault();var t=$(this);confirm(wpErpHr.delConfirmDept)&&wp.ajax.send("erp-hr-del-desig",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id")},success:function(){t.closest("tr").fadeOut("fast",function(){$(this).remove()})},error:function(e){alert(e)}})}},employee:{create:function(e){"undefined"!=typeof e&&e.preventDefault(),$.erpPopup({title:wpErpHr.popup.employee_title,button:wpErpHr.popup.employee_create,content:wp.template("erp-new-employee")()})},edit:function(){},remove:function(){}}};$(function(){e.initialize()})}(jQuery);