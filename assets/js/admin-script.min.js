!function($,t){"use strict";$(function(){var e={initialize:function(){this.self=this,console.log(t),$("select#erp-country").on("change",this.populateState),$("#postimagediv").on("click","#set-company-thumbnail",this.setCompanyLogo),$("#postimagediv").on("click","a.remove-logo",this.removeCompanyLogo),$(".erp-hr-depts").on("click","a#erp-new-dept",this.modalNewDepartment),$("select#erp-country").change()},hideModal:function(){},modalNewDepartment:function(t){"undefined"!=typeof t&&t.preventDefault(),$.erpPopup({title:wpErp.popup.dept_title,button:wpErp.popup.dept_submit,content:$("#erp-tmpl-new-dept").html(),extraClass:"smaller",onSubmit:function(t){var e=this.serialize();$.post(wpErp.ajaxurl,e,function(e){if(e.success===!0){var o=$("#erp-tmpl-dept-row").html(),p=$("table.department-list-table");if(p){var a=$("tr:last",p).attr("class"),a="odd"===a?"alternate":"odd";e.data.cls=a,o=_.template(o,e.data),p.append(o),t.closeModal()}}else alert(e.data)})}})},setCompanyLogo:function(t){t.preventDefault(),t.stopPropagation();var e;return e?void e.open():(e=wp.media({title:wpErp.upload_logo,button:{text:wpErp.set_logo}}),e.on("select",function(){var t=e.state().get("selection");t.map(function(t){t=t.toJSON();var e='<img src="'+t.url+'" alt="" />';e+='<input type="hidden" name="company_logo_id" value="'+t.id+'" />',e+='<a href="#" class="remove-logo">'+wpErp.remove_logo+"</a>",$(".inside","#postimagediv").html(e)})}),void e.open())},removeCompanyLogo:function(t){t.preventDefault();var e='<a href="#" id="set-company-thumbnail" class="thickbox">'+wpErp.upload_logo+"</a>";$(".inside","#postimagediv").html(e)},populateState:function(){if("undefined"==typeof wpErpCountries)return!1;var t=$(this).val(),e='<option val="-1">-------------</option>';if(console.log(t),console.log(wpErpCountries[t]),wpErpCountries[t]){var o="",p=wpErpCountries[t];for(var a in p)o=o+'<option value="'+a+'">'+p[a]+"</option>";$("#erp-state").html($.isArray(wpErpCountries[t])?e:o)}else $("#erp-state").html(e)}};e.initialize()})}(jQuery,this);