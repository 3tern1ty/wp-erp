!function($,t,e,n){function o(t){this.settings=$.extend({},i,t),this.element=$(this.settings.content),this._defaults=i,this._name=s,this.init()}var s="erpPopup",i={title:"",content:"",button:"Submit",extraClass:"",onReady:function(){},onSubmit:function(){}};$.extend(o.prototype,{init:function(){this.show_modal(),this.bindEvents()},bindEvents:function(){$(".erp-modal-backdrop, .erp-modal .close").on("click",$.proxy(this.closeModal,this)),$(".erp-modal form.erp-modal-form").on("submit",$.proxy(this.formSubmit,this)),$(t).on("keydown",$.proxy(this.onEscapeKey,this))},formSubmit:function(t){t.preventDefault(),this.settings.onSubmit.call($(t.currentTarget),this)},show_modal:function(){var t=$(".erp-modal");""!==this.settings.extraClass&&t.addClass(this.settings.extraClass),$(".erp-modal-backdrop").show(),t.find("h2").text(this.settings.title),t.find(".button-primary").text(this.settings.button),t.find(".content").empty().html(this.element),t.show(),this.settings.onReady.call(t,this)},onEscapeKey:function(t){27===t.keyCode&&this.closeModal()},disableButton:function(){$("button[type=submit]",".erp-modal").attr("disabled","disabled")},enableButton:function(){$("button[type=submit]",".erp-modal").removeAttr("disabled")},closeModal:function(t){"undefined"!=typeof t&&t.preventDefault();var e=$(".erp-modal");$(".content",e).empty(),$(".erp-modal-backdrop, .erp-modal").hide(),$("form.erp-modal-form",e).off("submit",this.formSubmit),""!==this.settings.extraClass&&e.removeClass(this.settings.extraClass),this.enableButton()}}),$.erpPopup=function(t){new o(t)}}(jQuery,window,document);